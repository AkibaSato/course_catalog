<%= javascript_include_tag "_search_controller" %>

<form id="live-search-form" class="form-inline" role="form" action="/entry" method="GET">
  <div class="form-group">
    <label class="filter-col" style="margin-right:0;" for="pref-perpage">Subject:</label>
    <select id="pref-perpage" class="form-control" name="subject">
      <option selected="selected" value="default">Default</option>
        <% @subjects.each do |each_subject| %>
          <option value = "<%= each_subject['university_id'] %>" ><%= each_subject['name'] %></option>
        <% end %>
    </select>
  </div>
  <div class="form-group">
    <label class="filter-col" style="margin-right:0;" for="pref-search">Course:</label>
    <input id="big-search_box" type="text" class="form-control input-sm" id="pref-search" name="course" style=" width:600px">
  </div>
  <div class="form-group">
    <label class="filter-col" style="margin-right:0;" for="pref-search"></label>
    <button type="submit" class="btn btn-default filter-col">Submit</button>
  </div>
</form>

<input type="text" id="myInput" onkeyup="ajaxSearch()" placeholder="Search for courses.." title="Type in a name">

<table id="myTable">
  <tr class="header">
    <th style="width:20%;">Name</th>
    <th style="width:55%;">Description</th>
    <th style="width:5%;">ID</th>
    <th style="width:5%;">Code</th>
    <th style="width:5%;">Credit</th>
  </tr>
  <% @courses.each do |each_course| %>
    <tr>
      <td><%= each_course['name'] %></td>
      <td><%= each_course['description'] %></td>
      <td><%= each_course['university_id'] %></td>
      <td><%= each_course['code'] %></td>
      <td><%= each_course['credit'] %></td>

      <% if @user.nil? %>
        <form action="/login" method="GET">
          <td><button type="submit" class="btn btn-primary">Login Please</button></td>
        </form>
      <% else %>
        <form action="/enroll" method="GET">
          <td><button type="submit" class="btn btn-primary" value="<%= each_course['id'] %>" name = "course_id">Enroll</button></td>
        </form>
      <% end %>

    </tr>
  <% end %>
</table>
